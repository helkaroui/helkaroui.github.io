<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.ff31de0ff">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Sharek.dev Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Sharek.dev Blog Atom Feed"><title data-react-helmet="true">Host your own Spark cluster | Sharek.dev</title><meta data-react-helmet="true" property="og:url" content="https://helkaroui.github.io/big_data/spark/how_to/setup_standalone_cluster"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-big_data_notes-current"><meta data-react-helmet="true" property="og:title" content="Host your own Spark cluster | Sharek.dev"><meta data-react-helmet="true" name="description" content="In this article we will go through the steps of deploying a standalone Spark cluster on a bunch of virtual machines."><meta data-react-helmet="true" property="og:description" content="In this article we will go through the steps of deploying a standalone Spark cluster on a bunch of virtual machines."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://helkaroui.github.io/big_data/spark/how_to/setup_standalone_cluster"><link data-react-helmet="true" rel="alternate" href="https://helkaroui.github.io/big_data/spark/how_to/setup_standalone_cluster" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://helkaroui.github.io/big_data/spark/how_to/setup_standalone_cluster" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.8ddd23c9.css">
<link rel="preload" href="/assets/js/runtime~main.03a2893c.js" as="script">
<link rel="preload" href="/assets/js/main.93d54cdc.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Sharek" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="Sharek" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Sharek.dev</strong></a><a class="navbar__item navbar__link" href="/home_lab/overview/">my Home Lab</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/big_data/overview/">Big Data Tutorials</a><a class="navbar__item navbar__link" href="/scala/overview/">Scala</a><a class="navbar__item navbar__link" href="/python/overview/">Python</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/about">About</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a href="https://github.com/helkaroui" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Sharek" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="Sharek" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Sharek.dev</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/home_lab/overview/">my Home Lab</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/big_data/overview/">Big Data Tutorials</a></li><li class="menu__list-item"><a class="menu__link" href="/scala/overview/">Scala</a></li><li class="menu__list-item"><a class="menu__link" href="/python/overview/">Python</a></li><li class="menu__list-item"><a class="menu__link" href="/about">About</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/helkaroui" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/big_data/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Apache Spark</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">How to ?</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/big_data/spark/how_to/setup_standalone_cluster">Host your own Spark cluster</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Spark internals</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/big_data/spark/internals/overview">Overview</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Spark optimizations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/big_data/spark/optimizations/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/big_data/spark/optimizations/quick_wins">Quick wins</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/big_data/spark/optimizations/reducebykey_vs_groupbykey">ReduceByKey vs GroupByKey</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Host your own Spark cluster</h1></header><div class="markdown"><p>In this article we will go through the steps of deploying a standalone <a href="https://spark.apache.org/" target="_blank" rel="noopener noreferrer">Spark</a> cluster on a bunch of virtual machines.
We will also run a simple application to test the setup and review the logs using Spark history server.
At the end, we will put the setup steps into an ansible playbook to have a full automation.
All resources and produced scripts of this article can be retrieved from github repo <a href="https://github.com/helkaroui/ansible-vagrant-stacks/tree/main/spark" target="_blank" rel="noopener noreferrer">ansible-vagrant-stacks</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="design"></a>Design<a class="hash-link" href="#design" title="Direct link to heading">#</a></h2><p>We want to create 3 virtual machines and deploy a standalone Spark cluster on them. These VMs should have the following IP addresses:</p><div style="text-align:center"><img alt="Spark standalone cluster" src="/img/setup_spark_cluster/architecture_diagram.png"></div><p>For this task, we&#x27;re gonna use <a href="https://www.vagrantup.com/" target="_blank" rel="noopener noreferrer">Vagrant</a> to automatically create and start virtual machines. Then Ansible will be used to install the dependencies automatically.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="requirements"></a>Requirements<a class="hash-link" href="#requirements" title="Direct link to heading">#</a></h2><ul><li>VirtualBox</li><li>Vagrant</li><li>Ansible</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="1-setup-virtualbox"></a>1. Setup VirtualBox<a class="hash-link" href="#1-setup-virtualbox" title="Direct link to heading">#</a></h3><p><a href="https://www.virtualbox.org/wiki/Downloads" target="_blank" rel="noopener noreferrer">VirtualBox</a> is a powerful virtualization tool that we will use to create virtual machines. </p><p>To setup VirtualBox, run the following commands :</p><div class="codeBlockContainer_K1bP"><div style="color:#F8F8F2;background-color:#282A36" class="codeBlockTitle_eoMF">Install</div><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">wget</span><span class="token plain"> -q https://www.virtualbox.org/download/oracle_vbox_2016.asc -O- </span><span class="token operator">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> apt-key </span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token plain"> -</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> apt-add-repository </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;deb [arch=amd64] http://download.virtualbox.org/virtualbox/debian </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">lsb_release -sc</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token string" style="color:rgb(255, 121, 198)"> contrib&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">apt-get</span><span class="token plain"> update </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">apt-get</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> -y virtualbox-6.1</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Now you can run VirtualBox from the Ubuntu Launcher or just run <code>virtualbox</code> in your command line.</p><div style="text-align:center"><img alt="VirtualBox fresh installation" src="/img/setup_spark_cluster/virtualbox_install.png"></div><p>We also need to download <em>VM VirtualBox Extension Pack</em> which is a set of extensions of the Oracle VM VirtualBox base package. The extension pack provides functionalities related to connectivity and remote desktop features.
To install it, refer to the <a href="https://www.virtualbox.org/wiki/Downloads" target="_blank" rel="noopener noreferrer">download</a> page or run the following command :</p><div class="codeBlockContainer_K1bP"><div style="color:#F8F8F2;background-color:#282A36" class="codeBlockTitle_eoMF">Download</div><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">wget</span><span class="token plain"> https://download.virtualbox.org/virtualbox/6.1.22/Oracle_VM_VirtualBox_Extension_Pack-6.1.22.vbox-extpack</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>In VirtualBox, we need to navigate the menu :  <code>File -&gt; Preference -&gt; Extensions</code>, then click on the add button and select the package we just downloaded.
Once there, the extension will be visible in the window</p><div style="text-align:center"><img alt="VirtualBox Extensions" src="/img/setup_spark_cluster/virtualbox_extensions.png"></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="2-install-vagrant"></a>2. Install Vagrant<a class="hash-link" href="#2-install-vagrant" title="Direct link to heading">#</a></h3><p>Vagrant is a simple and powerful automation tool to deal with VMs. It uses a declarative configuration file which describes all your software requirements. To start let&#x27;s install Vagrant. Go to <a href="https://www.vagrantup.com/downloads" target="_blank" rel="noopener noreferrer">Download page</a> and choose the right download steps for your OS.</p><p>For Debian based OS :</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">curl</span><span class="token plain"> -fsSL https://apt.releases.hashicorp.com/gpg </span><span class="token operator">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> apt-key </span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token plain"> -</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> apt-add-repository </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;deb [arch=amd64] https://apt.releases.hashicorp.com </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">lsb_release -cs</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token string" style="color:rgb(255, 121, 198)"> main&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">apt-get</span><span class="token plain"> update </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">apt-get</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> vagrant</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Once installed, run <code>vagrant --help</code> to verify the installation.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="3-install-ansible"></a>3. Install Ansible<a class="hash-link" href="#3-install-ansible" title="Direct link to heading">#</a></h3><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="create-vms-with-vagrant"></a>Create VMs with Vagrant<a class="hash-link" href="#create-vms-with-vagrant" title="Direct link to heading">#</a></h2><p><strong>Create a Vagrant configuration</strong></p><p>Now let&#x27;s create a project directory, in which we create a file named <code>Vagrantfile</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">mkdir</span><span class="token plain"> spark-cluster </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> spark-cluster</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">vim</span><span class="token plain"> Vagrantfile</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>So in the first part, we declare the base image we gonna use <code>ubuntu/xenial64</code></p><div class="codeBlockContainer_K1bP"><div style="color:#F8F8F2;background-color:#282A36" class="codeBlockTitle_eoMF">Vagrantfile</div><div class="codeBlockContent_hGly ruby"><div tabindex="0" class="prism-code language-ruby codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain"># -*- mode: ruby -*-</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"># vi: set ft=ruby :</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">VAGRANTFILE_API_VERSION = &quot;2&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">IMAGE_NAME = &quot;ubuntu/xenial64&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  config.vm.box = IMAGE_NAME</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  config.vm.synced_folder &quot;.&quot;, &quot;/vagrant&quot;, disabled: true</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  config.vm.provider :virtualbox do |v|</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    v.memory = 1024</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    v.cpus = 2</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    v.linked_clone = true</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  end</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  boxes = [</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      {:name =&gt; &quot;master&quot;,   :ip =&gt; &quot;10.11.13.10&quot;},</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      {:name =&gt; &quot;worker-1&quot;, :ip =&gt; &quot;10.11.13.11&quot;},</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      {:name =&gt; &quot;worker-2&quot;, :ip =&gt; &quot;10.11.13.12&quot;}</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  ]</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  # Provision each of the VMs.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  boxes.each do |opts|</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    config.vm.define opts[:name] do |config|</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      config.vm.hostname = opts[:name]</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      config.vm.network :private_network, ip: opts[:ip]</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    end</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  end</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">end</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>To start the VMs, just run :</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">vagrant up</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The VMs are now up and running !
you can check there status by running <code>vagrant status</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly text"><div tabindex="0" class="prism-code language-text codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">Current machine states:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">master                    running (virtualbox)</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">worker-1                  running (virtualbox)</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">worker-2                  running (virtualbox)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Also you can see the VMs on VirtualBox ui :</p><div style="text-align:center"><img alt="Spark reduceByKey" src="/img/setup_spark_cluster/virtualbox.png"></div><p>Now to ssh into each one on them, just run :</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly title=vagrant"><div tabindex="0" class="prism-code language-title=vagrant codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">vagrant@master:~$ </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>To shut down all the VMs at once, just run <code>vagrant halt</code>
To remove the VMs completely, just run <code>vagrant destroy</code></p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="setup-spark-nodes"></a>Setup Spark Nodes<a class="hash-link" href="#setup-spark-nodes" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="install-dependencies"></a>Install Dependencies<a class="hash-link" href="#install-dependencies" title="Direct link to heading">#</a></h3><p>Spark runs on Java 8/11, Scala 2.12. So we need to have Java JRE 8 installed (also JDK seems to be a pre-requisite as well).
On Debian based OS (like Ubuntu), this is as simple as running this command :</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">apt-get</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> default-jdk</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p><strong>Spark</strong> runs on Java 8/11, Scala 2.12, Python 3.6+ and R 3.5+. </p><p>Java 8 prior to version 8u92 support is deprecated as of Spark 3.0.0. For the Scala API, Spark 3.1.2 uses Scala 2.12.
You will need to use a compatible Scala version (2.12.x).</p></div></div><p>Then check the java version by running :</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">java -version</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The output tells you that Java is located in <code>/usr/lib/jvm/default-java</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="download-spark"></a>Download Spark<a class="hash-link" href="#download-spark" title="Direct link to heading">#</a></h3><p>Download latest Spark version when you are going to install. At writing time it&#x27;s <strong>v3.1.2</strong> :</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">wget https://mirrors.ircam.fr/pub/apache/spark/spark-3.1.2/spark-3.1.2-bin-hadoop3.2.tgz /tmp/spark/</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Extract the package to <code>/opt/spark</code> directory</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">tar xzvf /tmp/spark/spark-3.1.2-bin-hadoop3.2.tgz -c /opt/spark/</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><strong>Spark</strong> uses environment variables to locate it&#x27;s HOME_DIR and java, so we need to add those variables to <code>~/.bashrc</code></p><div class="codeBlockContainer_K1bP"><div style="color:#F8F8F2;background-color:#282A36" class="codeBlockTitle_eoMF">Edit .bashrc file</div><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">vim</span><span class="token plain"> ~/.bashrc</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>And add the following entries at the end :</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">JAVA_HOME</span><span class="token operator">=</span><span class="token plain">/usr/lib/jvm/default-java</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">SPARK_HOME</span><span class="token operator">=</span><span class="token plain">/opt/spark</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> </span><span class="token assign-left variable environment constant" style="color:rgb(189, 147, 249);font-style:italic">PATH</span><span class="token operator">=</span><span class="token environment constant" style="color:rgb(189, 147, 249)">$PATH</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$SPARK_HOME</span><span class="token plain">/bin:</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$SPARK_HOME</span><span class="token plain">/sbin</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Now source the file to apply those changes to the current session :</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">source ~/.bashrc</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Latest Apache Spark is successfully installed in your VM !</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="verify-installation"></a>Verify installation<a class="hash-link" href="#verify-installation" title="Direct link to heading">#</a></h3><p>To verify the installation, close the Terminal already opened, and open a new Terminal again. Run the following command :</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">spark-shell</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="configure-the-master-node"></a>Configure the Master node<a class="hash-link" href="#configure-the-master-node" title="Direct link to heading">#</a></h3><p>The most important configuration files you need to know about are :</p><ul><li><code>conf/spark-defaults.conf</code> : control most application parameters</li><li><code>conf/spark-env.sh</code> : can be used to set per-machine settings, such as the IP address</li><li><code>conf/log4j.properties</code> : can be used to configure applications logging properties.</li></ul><p>Let&#x27;s configure each one of them :</p><p>Edit <code>spark-defaults.conf</code> and put the following properties inside :</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">vim</span><span class="token plain"> /opt/spark/conf/spark-defaults.conf</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly text"><div tabindex="0" class="prism-code language-text codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">spark.master            spark://10.11.13.10:7077</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">spark.executor.memory   1g</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">spark.eventLog.enabled  true</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">spark.serializer        org.apache.spark.serializer.KryoSerializer</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Copy and edit <code>spark-env.sh</code> file :</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">cp</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$SPARK_HOME</span><span class="token plain">/conf/spark-env.sh.template </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$SPARK_HOME</span><span class="token plain">/conf/spark-env.sh</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">vim</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$SPARK_HOME</span><span class="token plain">/conf/spark-env.sh</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Add the following line :</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly text"><div tabindex="0" class="prism-code language-text codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">export SPARK_MASTER_HOST=10.11.13.10</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Copy and edit <code>slaves</code> file :</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">cp</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$SPARK_HOME</span><span class="token plain">/conf/slaves.template </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$SPARK_HOME</span><span class="token plain">/conf/slaves</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">vim</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$SPARK_HOME</span><span class="token plain">/conf/slaves</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Add IP address of slaves. Delete &quot;localhost&quot; #if present</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly text"><div tabindex="0" class="prism-code language-text codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">10.11.13.11</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">10.11.13.12</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="run-the-cluster"></a>Run the cluster<a class="hash-link" href="#run-the-cluster" title="Direct link to heading">#</a></h2><p>From spark master node, run the following command :</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$SPARK_HOME</span><span class="token plain">/sbin/start-all.sh</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The spark ui will be available on <a href="http://10.11.13.10:8080" target="_blank" rel="noopener noreferrer">10.11.13.10:8080</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="submitting-application-to-cluster"></a>Submitting Application to Cluster<a class="hash-link" href="#submitting-application-to-cluster" title="Direct link to heading">#</a></h2><p>We can check if our cluster is correctly running by submitting an application. Spark comes with some examples, run the code below to calculate the value of Pi.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">spark-submit </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  --class org.apache.spark.examples.SparkPi </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  --master spark://10.11.13.10:7077 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$SPARK_HOME</span><span class="token plain">/examples/jars/spark-examples_2.12-3.1.2.jar</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>In the console, you will see the following output : </p><div class="codeBlockContainer_K1bP"><div style="color:#F8F8F2;background-color:#282A36" class="codeBlockTitle_eoMF">Compute PI</div><div class="codeBlockContent_hGly text"><div tabindex="0" class="prism-code language-text codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">21/06/20 10:10:49 INFO SparkContext: Running Spark version 3.1.2</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">21/06/20 10:10:49 INFO ResourceUtils: ==============================================================</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">21/06/20 10:10:49 INFO ResourceUtils: No custom resources configured for spark.driver.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">21/06/20 10:10:49 INFO ResourceUtils: ==============================================================</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">21/06/20 10:10:50 INFO SparkContext: Submitted application: Spark Pi</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">...</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">21/06/20 10:10:57 INFO DAGScheduler: ResultStage 0 (reduce at SparkPi.scala:38) finished in 3.687 s</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">21/06/20 10:10:57 INFO DAGScheduler: Job 0 is finished. Cancelling potential speculative or zombie tasks for this job</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">21/06/20 10:10:57 INFO TaskSchedulerImpl: Killing all running tasks in stage 0: Stage finished</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">21/06/20 10:10:57 INFO DAGScheduler: Job 0 finished: reduce at SparkPi.scala:38, took 3.807045 s</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#F8F8F2"><span class="token plain">Pi is roughly 3.141715708578543</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">21/06/20 10:10:57 INFO SparkUI: Stopped Spark web UI at http://192.168.1.71:4040</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">21/06/20 10:10:57 INFO StandaloneSchedulerBackend: Shutting down all executors</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Once completed, the application name will show up in the &quot;Completed Applications&quot; section in the Spark UI:</p><div style="text-align:center"><img alt="Spark UI" src="/img/setup_spark_cluster/pi_application.png"></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="using-spark-history-server"></a>Using Spark History Server<a class="hash-link" href="#using-spark-history-server" title="Direct link to heading">#</a></h2><p>To check applications logs, you can run Spark history server on master node :</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">start-history-server.sh</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The UI will be available on <a href="http://10.11.13.10:18080" target="_blank" rel="noopener noreferrer">10.11.13.10:18080</a></p><div style="text-align:center"><img alt="Spark History Server UI" src="/img/setup_spark_cluster/spark_history_server.png"></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="one-playbook-to-unite-them-all"></a>&quot;One Playbook to unite them all&quot;<a class="hash-link" href="#one-playbook-to-unite-them-all" title="Direct link to heading">#</a></h2><p>Finally, we don&#x27;t want to repeat all these steps each time we add a new worker node.
So what we did is, we created an Ansible playbook that provisions the VMs automatically. The project is found here : <a href="https://github.com/helkaroui/ansible-vagrant-stacks/tree/main/spark" target="_blank" rel="noopener noreferrer">ansible-vagrant-stacks</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="conclusion"></a>Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">#</a></h2><p>In this post, we have learnt how to setup our own Spark Stand Alone Cluster and how to submit a simple application to it.
This setup will allow us to experiment with Spark&#x27;s fundamental and deep dive into its internals.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/big_data/overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Overview</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/big_data/spark/internals/overview"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Overview »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#design" class="table-of-contents__link">Design</a></li><li><a href="#requirements" class="table-of-contents__link">Requirements</a><ul><li><a href="#1-setup-virtualbox" class="table-of-contents__link">1. Setup VirtualBox</a></li><li><a href="#2-install-vagrant" class="table-of-contents__link">2. Install Vagrant</a></li><li><a href="#3-install-ansible" class="table-of-contents__link">3. Install Ansible</a></li></ul></li><li><a href="#create-vms-with-vagrant" class="table-of-contents__link">Create VMs with Vagrant</a></li><li><a href="#setup-spark-nodes" class="table-of-contents__link">Setup Spark Nodes</a><ul><li><a href="#install-dependencies" class="table-of-contents__link">Install Dependencies</a></li><li><a href="#download-spark" class="table-of-contents__link">Download Spark</a></li><li><a href="#verify-installation" class="table-of-contents__link">Verify installation</a></li><li><a href="#configure-the-master-node" class="table-of-contents__link">Configure the Master node</a></li></ul></li><li><a href="#run-the-cluster" class="table-of-contents__link">Run the cluster</a></li><li><a href="#submitting-application-to-cluster" class="table-of-contents__link">Submitting Application to Cluster</a></li><li><a href="#using-spark-history-server" class="table-of-contents__link">Using Spark History Server</a></li><li><a href="#one-playbook-to-unite-them-all" class="table-of-contents__link">&quot;One Playbook to unite them all&quot;</a></li><li><a href="#conclusion" class="table-of-contents__link">Conclusion</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Recent articles</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/big_data/overview">Getting started with Spark</a></li><li class="footer__item"><a class="footer__link-item" href="/big_data/spark/optimizations/overview">Spark optimization techniques you should know about</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/helkaroui" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 Sharek.dev, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.03a2893c.js"></script>
<script src="/assets/js/main.93d54cdc.js"></script>
</body>
</html>