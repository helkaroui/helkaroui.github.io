language: node_js
node_js:
  - '12'
branches:
  only:
    - develop
cache:
  yarn: true
script:
  - pwd && ls
  - yarn && npm run build
  - git clone https://${GH_NAME}:${GH_TOKEN}@github.com/helkaroui/helkaroui.github.io --branch=master ~/$TRAVIS_BUILD_NUMBER
  - rsync -avu --delete --exclude='.git/' build/ ~/$TRAVIS_BUILD_NUMBER/
  - cd ~/$TRAVIS_BUILD_NUMBER
  - git config --global user.name "${GH_NAME}"
  - git config --global user.email "${GH_EMAIL}"
  - git remote set-url origin https://${GH_NAME}:${GH_TOKEN}@github.com/helkaroui/helkaroui.github.io 
  - git add . && git commit "[Travis-CI] build number=$TRAVIS_BUILD_NUMBER"
  - pwd && ls && git push -f https://${GH_NAME}:${GH_TOKEN}@github.com/helkaroui/helkaroui.github.io