"use strict";(self.webpackChunksharek_dev=self.webpackChunksharek_dev||[]).push([[4988],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>h});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var s=n.createContext({}),c=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},u=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=c(r),m=a,h=p["".concat(s,".").concat(m)]||p[m]||d[m]||o;return r?n.createElement(h,i(i({ref:t},u),{},{components:r})):n.createElement(h,i({ref:t},u))}));function h(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,i=new Array(o);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:a,i[1]=l;for(var c=2;c<o;c++)i[c]=r[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},3166:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var n=r(7462),a=(r(7294),r(3905));const o={title:"Implementation"},i=void 0,l={unversionedId:"scheduler/implementation",id:"scheduler/implementation",title:"Implementation",description:"In this section, I'll explain the technical details of the Scheduler.",source:"@site/sections/projects/scheduler/2-implementation.md",sourceDirName:"scheduler",slug:"/scheduler/implementation",permalink:"/projects/scheduler/implementation",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Implementation"},sidebar:"docs",previous:{title:"Concepts",permalink:"/projects/scheduler/concepts"},next:{title:"Interfacing Multiple Languages",permalink:"/projects/scheduler/building blocks/multilangual"}},s={},c=[{value:"Akka Cluster :",id:"akka-cluster-",level:2},{value:"Actor hierarchy",id:"actor-hierarchy",level:2},{value:"Minimal Cluster application :",id:"minimal-cluster-application-",level:3},{value:"Resources :",id:"resources-",level:2}],u={toc:c},p="wrapper";function d(e){let{components:t,...r}=e;return(0,a.kt)(p,(0,n.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"In this section, I'll explain the technical details of the Scheduler."),(0,a.kt)("h2",{id:"akka-cluster-"},"Akka Cluster :"),(0,a.kt)("p",null,"I choosed ",(0,a.kt)("inlineCode",{parentName:"p"},"Akka Cluster")," librarie as a base framework to build on the Scheduler for various reasons :"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Akka is a production prooved framework, that enables to build distributed applications."),(0,a.kt)("li",{parentName:"ul"},"Akka Cluster gives you out-of-the-box the discovery of members in the same cluster"),(0,a.kt)("li",{parentName:"ul"},"Using Cluster Aware Routers it is possible to balance the messages between actors in different nodes")),(0,a.kt)("p",null,"Akka clusters provide a solid foundation for building systems that are resilient to failure and also capable of elastically expanding and contracting as needed to handle the current processing load."),(0,a.kt)("p",null,"To distrubute work to the workers nodes, ",(0,a.kt)("inlineCode",{parentName:"p"},"Akka Cluster Aware Routers")," can balance messages between actors in different nodes. It also provides several balancing policies, making load-balancig a piece of cake."),(0,a.kt)("p",null,"Aware Routers come with two types :"),(0,a.kt)("p",null,(0,a.kt)("em",{parentName:"p"},"Group Router")," \u2014 The actors to send the messages to \u2014 called routees \u2014 are specified using their actor path. The routers share the routees created in the cluster. We will use a Group Router in this example."),(0,a.kt)("p",null,(0,a.kt)("em",{parentName:"p"},"Pool Router")," \u2014 The routees are created and deployed by the router, so they are its children in the actor hierarchy. Routees are not shared between routers. This is ideal for a primary-replica scenario, where each router is the primary and its routees the replicas."),(0,a.kt)("h2",{id:"actor-hierarchy"},"Actor hierarchy"),(0,a.kt)("h3",{id:"minimal-cluster-application-"},"Minimal Cluster application :"),(0,a.kt)("p",null,"To use Akka Cluster, we add the following dependency in the project:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-scala"},'val AkkaVersion = "2.6.19"\nlibraryDependencies += "com.typesafe.akka" %% "akka-cluster-typed" % AkkaVersion\n')),(0,a.kt)("p",null,"The minimum configuration required is to set a host/port for remoting and the ",(0,a.kt)("inlineCode",{parentName:"p"},'akka.actor.provider = "cluster"'),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'akka {\n  actor {\n    provider = "cluster"\n  }\n  remote.artery {\n    canonical {\n      hostname = "127.0.0.1"\n      port = 2551\n    }\n  }\n\n  cluster {\n    seed-nodes = [\n      "akka://ClusterSystem@127.0.0.1:2551",\n      "akka://ClusterSystem@127.0.0.1:2552"]\n    \n    downing-provider-class = "akka.cluster.sbr.SplitBrainResolverProvider"\n  }\n}\n')),(0,a.kt)("h2",{id:"resources-"},"Resources :"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Code generation : ",(0,a.kt)("a",{parentName:"li",href:"https://youtu.be/wVs1FZyKXMY"},"https://youtu.be/wVs1FZyKXMY"))))}d.isMDXComponent=!0}}]);