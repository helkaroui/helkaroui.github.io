"use strict";(self.webpackChunksharek_dev=self.webpackChunksharek_dev||[]).push([[3409],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=r.createContext({}),l=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=l(e.components);return r.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,c=u(e,["components","mdxType","originalType","parentName"]),p=l(n),m=o,h=p["".concat(s,".").concat(m)]||p[m]||d[m]||a;return n?r.createElement(h,i(i({ref:t},c),{},{components:n})):r.createElement(h,i({ref:t},c))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=p;var u={};for(var s in t)hasOwnProperty.call(t,s)&&(u[s]=t[s]);u.originalType=e,u.mdxType="string"==typeof e?e:o,i[1]=u;for(var l=2;l<a;l++)i[l]=n[l];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}p.displayName="MDXCreateElement"},4490:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return u},metadata:function(){return s},toc:function(){return l},default:function(){return d}});var r=n(7462),o=n(3366),a=(n(7294),n(3905)),i=["components"],u={title:"Mount disk"},s={unversionedId:"infrastructure/mount_disk",id:"infrastructure/mount_disk",isDocsHomePage:!1,title:"Mount disk",description:"Create a mount point",source:"@site/notes/home_lab_notes/infrastructure/mount_disk.md",sourceDirName:"infrastructure",slug:"/infrastructure/mount_disk",permalink:"/home_lab/infrastructure/mount_disk",version:"current",frontMatter:{title:"Mount disk"},sidebar:"docs",previous:{title:"Minio",permalink:"/home_lab/infrastructure/minio"},next:{title:"Used Cars Comparator",permalink:"/home_lab/infrastructure/compare_used_cars"}},l=[{value:"Create a mount point",id:"create-a-mount-point",children:[]},{value:"The automount entry",id:"the-automount-entry",children:[]}],c={toc:l};function d(e){var t=e.components,n=(0,o.Z)(e,i);return(0,a.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"create-a-mount-point"},"Create a mount point"),(0,a.kt)("p",null,"The mount point is the directory where users will access the data on the drive"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"sudo mkdir /data\n")),(0,a.kt)("p",null,"We'll want to also change the group ownership of that directory."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"sudo groupadd data\nsudo usermod -aG data $USER\nsudo usermod -aG data root\n")),(0,a.kt)("p",null,"Then change the ownership of the mountpoint with the command: "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"sudo chown -R :data /data\n")),(0,a.kt)("h2",{id:"the-automount-entry"},"The automount entry"),(0,a.kt)("p",null,"we need to find the UUID (Universal Unique Identifier) of the drive. To do that, issue the command: "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"sudo blkid\n")),(0,a.kt)("p",null,"In order to create the automount entry, run this cmd:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"sudo vim /etc/fstab\n")),(0,a.kt)("p",null,"At the bottom of that file, we'll add an entry that contains the information we've discovered. The entry will look like this: "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"UUID=14D82C19D82BF81E /data    auto nosuid,nodev,nofail,x-gvfs-show 0 0\n")),(0,a.kt)("p",null,"Breaking that line down, we have:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"UUID=14D82C19D82BF81E - is the UUID of the drive. You don't have to use the UUID here. You could just use /dev/sdj, but it's always safer to use the UUID as that will never change (whereas the device name could)."),(0,a.kt)("li",{parentName:"ul"},"/data - is the mount point for the device."),(0,a.kt)("li",{parentName:"ul"},"auto - automatically determine the file system"),(0,a.kt)("li",{parentName:"ul"},"nosuid - specifies that the filesystem cannot contain set userid files. This prevents root escalation and other security issues."),(0,a.kt)("li",{parentName:"ul"},"nodev - specifies that the filesystem cannot contain special devices (to prevent access to random device hardware)."),(0,a.kt)("li",{parentName:"ul"},"nofail - removes the errorcheck."),(0,a.kt)("li",{parentName:"ul"},"x-gvfs-show - show the mount option in the file manager. If this is on a GUI-less server, this option won't be necessary."),(0,a.kt)("li",{parentName:"ul"},"0 - determines which filesystems need to be dumped (0 is the default)."),(0,a.kt)("li",{parentName:"ul"},"0 - determine the order in which filesystem checks are done at boot time (0 is the default).")),(0,a.kt)("p",null,"Before you reboot the machine, you need to test your new fstab entry. To do this, issue the command: "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"sudo mount -a\n")),(0,a.kt)("p",null,"If you see no errors, the fstab entry is correct and you're safe to reboot."))}d.isMDXComponent=!0}}]);